# PDF æ™ºæ…§åˆ‡å‰²å™¨

ä¸€å€‹å®Œå…¨åœ¨ç€è¦½å™¨å…§é‹è¡Œçš„ PDF å·¥å…·ï¼Œæ”¯æ´åˆ‡å‰²ã€åˆä½µèˆ‡ Google Gemini AI æ‘˜è¦åŠŸèƒ½ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹è‰²

### ğŸ”ª PDF åˆ‡å‰²åŠŸèƒ½
| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| **ç¯„åœåˆ‡å‰²** | æŒ‡å®šèµ·å§‹é èˆ‡çµæŸé ï¼Œæå–é€£çºŒé é¢ç‚ºå–®ä¸€ PDF |
| **ç¨ç«‹é é¢åˆ‡å‰²** | è¼¸å…¥å¤šå€‹é ç¢¼ï¼ˆé€—è™Ÿåˆ†éš”ï¼‰ï¼Œåˆ†åˆ¥åˆ‡å‰²ä¸¦æ‰“åŒ…æˆ ZIP |

### ğŸ§© PDF åˆä½µåŠŸèƒ½
| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| **å¤šæª”åˆä½µ** | æ”¯æ´å¤šå€‹ PDF ä¸Šå‚³ï¼Œä¾ä¸Šå‚³é †åºåˆä½µæˆå–®ä¸€ PDF |
| **é¸é åˆä½µ** | å¾å–®ä¸€ PDF æŒ‡å®šé ç¢¼æ¸…å–®æˆ–ç¯„åœï¼Œåˆä½µæˆå–®ä¸€ PDF |

### ğŸ¤– AI æ™ºæ…§åŠŸèƒ½
| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| **AI æ‘˜è¦æŒ‡å®šé é¢** | æ”¯æ´å–®é  (`1, 3, 5`) æˆ–é€£çºŒé  (`1-5`) æ ¼å¼ï¼Œæ‘˜è¦æŒ‡å®šé é¢çš„å®Œæ•´å…§å®¹ |

### ğŸ”’ éš±ç§ä¿è­·
- **å®Œå…¨æœ¬åœ°è™•ç†**ï¼šPDF åˆ‡å‰²èˆ‡åˆä½µåœ¨ç€è¦½å™¨å…§å®Œæˆï¼Œæª”æ¡ˆä¸æœƒä¸Šå‚³è‡³ä¼ºæœå™¨
- **AI åŠŸèƒ½åƒ…å‚³è¼¸æ–‡å­—**ï¼šåƒ…å°‡æå–çš„æ–‡å­—ç‰‡æ®µå‚³é€è‡³ Google Gemini API

---

## ğŸ› ï¸ æŠ€è¡“æ¶æ§‹

### å‰ç«¯æŠ€è¡“æ£§
| æŠ€è¡“ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| React | 18 | UI æ¡†æ¶ï¼ˆé€é CDN è¼‰å…¥ï¼‰ |
| Tailwind CSS | CDN | æ¨£å¼æ¡†æ¶ |
| Babel Standalone | - | ç€è¦½å™¨ç«¯ JSX ç·¨è­¯ |

### PDF è™•ç†å‡½å¼åº«
| å‡½å¼åº« | ç‰ˆæœ¬ | ç”¨é€” |
|--------|------|------|
| [pdf-lib](https://pdf-lib.js.org/) | 1.17.1 | PDF è®€å–ã€é é¢è¤‡è£½ã€å»ºç«‹æ–° PDF |
| [PDF.js](https://mozilla.github.io/pdf.js/) | 3.11.174 | æ–‡å­—æå–ï¼ˆä¾› AI åˆ†æï¼‰ |
| [JSZip](https://stuk.github.io/jszip/) | 3.10.1 | å¤šé é¢æ‰“åŒ…ç‚º ZIP |

### AI æ•´åˆ
| æœå‹™ | ç”¨é€” |
|------|------|
| Google Gemini API | å…§å®¹æ‘˜è¦ |

---

## ğŸ“– ç¨‹å¼ç¢¼æ¶æ§‹

### ç‹€æ…‹ç®¡ç† (React Hooks)
```javascript
// æ ¸å¿ƒç‹€æ…‹
const [pdfFile, setPdfFile] = useState(null);     // åŸå§‹ PDF æª”æ¡ˆ
const [pdfDoc, setPdfDoc] = useState(null);       // pdf-lib æ–‡ä»¶ç‰©ä»¶
const [pageCount, setPageCount] = useState(0);    // ç¸½é æ•¸
const [mode, setMode] = useState('range');        // æ¨¡å¼ï¼š'range' | 'individual' | 'merge-pages' | 'merge-files' | 'summary'

// è¼¸å…¥ç‹€æ…‹
const [rangeStart, setRangeStart] = useState(''); // ç¯„åœèµ·å§‹é 
const [rangeEnd, setRangeEnd] = useState('');     // ç¯„åœçµæŸé 
const [individualPages, setIndividualPages] = useState(''); // ç¨ç«‹é ç¢¼
const [mergePagesInput, setMergePagesInput] = useState(''); // é¸é åˆä½µé ç¢¼
const [mergeFiles, setMergeFiles] = useState([]); // å¤šæª”åˆä½µæª”æ¡ˆ

// AI ç›¸é—œ
const [userApiKey, setUserApiKey] = useState('');     // Gemini API Key
const [selectedModel, setSelectedModel] = useState('gemini-2.5-flash'); // æ¨¡å‹é¸æ“‡
const [aiMsg, setAiMsg] = useState('');               // AI å›æ‡‰è¨Šæ¯
const [summaryPages, setSummaryPages] = useState(''); // æ‘˜è¦é ç¢¼è¼¸å…¥

// è™•ç†ç‹€æ…‹
const [isProcessing, setIsProcessing] = useState(false);   // PDF è™•ç†ä¸­
const [isAiProcessing, setIsAiProcessing] = useState(false); // AI è™•ç†ä¸­
const [statusMsg, setStatusMsg] = useState({ type: '', text: '' }); // ç‹€æ…‹è¨Šæ¯
```

---

### æ ¸å¿ƒå‡½æ•¸èªªæ˜

#### 1. `processFile(file)` - PDF è¼‰å…¥
```
æµç¨‹ï¼šFile â†’ ArrayBuffer â†’ PDFDocument.load() â†’ æ›´æ–°ç‹€æ…‹
```
- ä½¿ç”¨ `pdf-lib` è¼‰å…¥ PDF
- å–å¾—ç¸½é æ•¸ä¸¦åˆå§‹åŒ–è¼¸å…¥æ¬„ä½

#### 2. `parsePageInput(input, maxPage)` - é ç¢¼è§£æï¼ˆå…±ç”¨ï¼‰
```
ç”¨é€”ï¼šè§£æä½¿ç”¨è€…è¼¸å…¥çš„é ç¢¼å­—ä¸²ï¼Œä¿åºå»é‡ä¸¦æª¢æŸ¥ç¯„åœ
æ”¯æ´æ ¼å¼ï¼š
  - å–®é ï¼š"1, 3, 5"
  - é€£çºŒé ï¼š"1-5"
  - æ··åˆï¼š"1-3, 7, 10-12"
å›å‚³ï¼špages / invalidTokens / outOfRange
```

#### 3. `extractTextByPages(pageNumbers)` - æŒ‡å®šé ç¢¼æ–‡å­—æå–
```
ç”¨é€”ï¼šæ ¹æ“šæŒ‡å®šé ç¢¼é™£åˆ—æå–å®Œæ•´æ–‡å­—ï¼ˆä¾›æ‘˜è¦ä½¿ç”¨ï¼‰
åƒæ•¸ï¼špageNumbers - é ç¢¼é™£åˆ—ï¼ˆå¯ä¸é€£çºŒï¼‰
è¼¸å‡ºï¼šæ ¼å¼åŒ–çš„å®Œæ•´æ–‡å­—å­—ä¸² "[Page X]:\nå®Œæ•´å…§å®¹\n\n"
```
- ä½¿ç”¨ `PDF.js` æå–æ–‡å­—å…§å®¹
- å–æ•´é æ‰€æœ‰æ–‡å­—ï¼ˆç„¡å­—æ•¸é™åˆ¶ï¼‰

#### 4. `handleAiSummarize()` - AI å…§å®¹æ‘˜è¦
```
æµç¨‹ï¼šè§£æé ç¢¼ â†’ æª¢æŸ¥é æ•¸é™åˆ¶ â†’ æå–æ–‡å­— â†’ å‘¼å« Gemini API â†’ é¡¯ç¤ºæ‘˜è¦
```

#### 5. `handleSplit()` - åŸ·è¡Œåˆ‡å‰²
```
ç¯„åœæ¨¡å¼ (range)ï¼š
  1. å»ºç«‹æ–° PDFDocument
  2. è¤‡è£½æŒ‡å®šé é¢ç¯„åœ
  3. å„²å­˜ä¸¦ä¸‹è¼‰ç‚º PDF

ç¨ç«‹é é¢æ¨¡å¼ (individual)ï¼š
  1. è§£æé ç¢¼å­—ä¸²ï¼Œå»é‡ä¸¦æ’åº
  2. ç‚ºæ¯å€‹é ç¢¼å»ºç«‹ç¨ç«‹ PDF
  3. ä½¿ç”¨ JSZip æ‰“åŒ…
  4. ä¸‹è¼‰ ZIP æª”æ¡ˆ
```

#### 6. `handleMergeFiles()` - å¤šæª”åˆä½µ
```
æµç¨‹ï¼šé€æª”è¼‰å…¥ PDF â†’ ä¾ä¸Šå‚³é †åºè¤‡è£½é é¢ â†’ å„²å­˜ä¸¦ä¸‹è¼‰å–®ä¸€ PDF
```

#### 7. `handleMergePages()` - é¸é åˆä½µ
```
æµç¨‹ï¼šè§£æé ç¢¼ â†’ é©—è­‰ç¯„åœ â†’ ä¾è¼¸å…¥é †åºåˆä½µé é¢ â†’ ä¸‹è¼‰å–®ä¸€ PDF
```

#### 8. `downloadBlob(data, name, mimeType)` - æª”æ¡ˆä¸‹è¼‰
```
æµç¨‹ï¼šBlob â†’ URL.createObjectURL â†’ è§¸ç™¼ä¸‹è¼‰ â†’ æ¸…ç† URL
```

---

## ğŸ¨ UI å…ƒä»¶çµæ§‹

```
PDFSplitter (ä¸»å…ƒä»¶)
â”œâ”€â”€ Header (æ¨™é¡Œåˆ—)
â”‚   â”œâ”€â”€ è¨­å®šæŒ‰éˆ• (åˆ‡æ› API Key é¢æ¿)
â”‚   â””â”€â”€ é‡æ–°ä¸Šå‚³æŒ‰éˆ•
â”‚
â”œâ”€â”€ API Key è¨­å®šé¢æ¿ (å¯æ”¶åˆ)
â”‚   â”œâ”€â”€ API Key è¼¸å…¥æ¡†
â”‚   â””â”€â”€ æ¨¡å‹é¸æ“‡ä¸‹æ‹‰é¸å–®
â”‚
â”œâ”€â”€ ä¸»å…§å®¹å€
â”‚   â”œâ”€â”€ æ¨¡å¼åˆ‡æ›æ¨™ç±¤ (äº”å€‹ Tab)
â”‚   â”‚   â”œâ”€â”€ ç¯„åœåˆ‡å‰²
â”‚   â”‚   â”œâ”€â”€ ç¨ç«‹é é¢
â”‚   â”‚   â”œâ”€â”€ é¸é åˆä½µ
â”‚   â”‚   â”œâ”€â”€ å¤šæª”åˆä½µ
â”‚   â”‚   â””â”€â”€ AI æ‘˜è¦
â”‚   â”œâ”€â”€ æª”æ¡ˆè³‡è¨Šå¡ï¼ˆéå¤šæª”åˆä½µæ¨¡å¼ï¼‰
â”‚   â”œâ”€â”€ è¼¸å…¥å€åŸŸ
â”‚   â”‚   â”œâ”€â”€ [ç¯„åœæ¨¡å¼] èµ·å§‹é /çµæŸé 
â”‚   â”‚   â”œâ”€â”€ [ç¨ç«‹æ¨¡å¼] é ç¢¼è¼¸å…¥
â”‚   â”‚   â”œâ”€â”€ [é¸é åˆä½µ] é ç¢¼è¼¸å…¥
â”‚   â”‚   â”œâ”€â”€ [å¤šæª”åˆä½µ] å¤šæª”ä¸Šå‚³ + æª”æ¡ˆé †åºåˆ—è¡¨
â”‚   â”‚   â””â”€â”€ [æ‘˜è¦æ¨¡å¼] é ç¢¼è¼¸å…¥ + åŸ·è¡Œæ‘˜è¦æŒ‰éˆ•
â”‚   â”œâ”€â”€ AI å›æ‡‰å€åŸŸ
â”‚   â”œâ”€â”€ ç‹€æ…‹è¨Šæ¯ (æˆåŠŸ/éŒ¯èª¤)
â”‚   â””â”€â”€ ä¸‹è¼‰æŒ‰éˆ•ï¼ˆä¾æ¨¡å¼é¡¯ç¤º/éš±è—ï¼‰
â”‚
â””â”€â”€ é å°¾ (éš±ç§èªªæ˜)
```

---

## ğŸ“Š æ”¯æ´çš„ Gemini æ¨¡å‹

| æ¨¡å‹ | API åç¨± | èªªæ˜ |
|------|----------|------|
| Gemini 2.5 Flash | `gemini-2.5-flash` | **æ¨è–¦**ï¼Œç©©å®šä¸”å¿«é€Ÿ |
| Gemini 2.5 Pro | `gemini-2.5-pro` | ç©©å®šï¼Œå¼·å¤§æ¨ç†èƒ½åŠ› |
| Gemini 3 Flash Preview | `gemini-3-flash-preview` | æœ€æ–°ï¼Œå¿«é€Ÿ |
| Gemini 3 Pro Preview | `gemini-3-pro-preview` | æœ€æ–°ï¼Œé€²éšæ¨ç† |
| Gemini 2.0 Flash | `gemini-2.0-flash` | ç©©å®šï¼Œé«˜æ•ˆ |

---

## ğŸ”§ API å‘¼å«æ ¼å¼

### Gemini API è«‹æ±‚
```javascript
fetch(`https://generativelanguage.googleapis.com/v1beta/models/${selectedModel}:generateContent?key=${apiKey}`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        contents: [{
            parts: [{ text: prompt }]
        }]
    })
});
```

### å›æ‡‰è§£æ
```javascript
const aiText = data.candidates?.[0]?.content?.parts?.[0]?.text;
```

---

## âš™ï¸ é™åˆ¶èˆ‡æ³¨æ„äº‹é …

| é …ç›® | é™åˆ¶ |
|------|------|
| AI æ‘˜è¦ | æ”¯æ´æŒ‡å®šé ç¢¼ï¼ˆå–®é å¦‚ `1, 3, 5` æˆ–é€£çºŒé å¦‚ `1-5`ï¼‰ï¼Œæœ€å¤š 10 é ï¼Œå–æ•´é å®Œæ•´æ–‡å­— |
| å—å¯†ç¢¼ä¿è­· PDF | ç„¡æ³•è™•ç† |
| æå£çš„ PDF | ç„¡æ³•è™•ç† |
| API Key | ä½¿ç”¨ AI åŠŸèƒ½å¿…é ˆæä¾›æœ‰æ•ˆçš„ Gemini API Key |

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

1. ç›´æ¥åœ¨ç€è¦½å™¨é–‹å•Ÿ `index.html`
2. ï¼ˆå¯é¸ï¼‰é»æ“Šã€ŒAI è¨­å®šã€è¼¸å…¥ Gemini API Key ä»¥å•Ÿç”¨ AI åŠŸèƒ½
3. é¸æ“‡åŠŸèƒ½æ¨¡å¼ï¼š
   - **ç¯„åœåˆ‡å‰² / ç¨ç«‹é é¢ / é¸é åˆä½µ / AI æ‘˜è¦**ï¼šå…ˆä¸Šå‚³å–®ä¸€ PDF
   - **å¤šæª”åˆä½µ**ï¼šç›´æ¥ä¸Šå‚³å¤šå€‹ PDF
4. ä¾æ¨¡å¼è¼¸å…¥é ç¢¼æˆ–ä¸Šå‚³æª”æ¡ˆ
5. æŒ‰ä¸‹ä¸‹è¼‰æŒ‰éˆ•å–å¾—çµæœï¼ˆå¤šæª”åˆä½µéœ€å…ˆä¸Šå‚³æª”æ¡ˆæ‰æœƒé¡¯ç¤ºæŒ‰éˆ•ï¼‰

---

## ğŸ“ æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šã€‚
